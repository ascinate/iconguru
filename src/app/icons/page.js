"use client";
import { useEffect, useState } from "react";
import NavicationHome from "../components/NavicationHome";
import Footer from "../components/Footer";
import Head from "next/head";
import Image from "next/image";
import Link from "next/link";
import Form from "next/form";

export default function Icons() {


  const staticImages = [
    '/interface.svg',
    '/design-th1.svg',
    '/food-th.svg',
    '/social.svg',
    '/business.svg',
    '/shopping1.svg',
    '/shopping1.svg'
  ];

  const [icontypes, setCategoryTypes] = useState([]);

  useEffect(() => {
    const fetchCategories = async () => {
      try {
        const res = await fetch("https://iconsguru.com/admin/api/icon-categories");
        const json = await res.json();
        if (json.status && Array.isArray(json.data)) {
          const updatedData = json.data.map((item, index) => ({
            ...item,
            img: staticImages[index] || '/default.svg',
            link: `/cat/${encodeURIComponent(item.icon_category.toLowerCase())}`
          }));
          setCategoryTypes(updatedData);
        }
      } catch (error) {
        console.error("Failed to fetch categories:", error);
      }
    };

    fetchCategories();
  }, []);


  return (
    <>
      <Head>
        <title>Icons Page</title>
        <meta name="description" content="Generated by create next app" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <NavicationHome/>
      <main className="pricing-pages-part float-start w-100">
            <section className="float-start w-100 pt-0">
                  <div className="container">
                     <div className="comon-cate-list trending-icons d-inline-block w-100">
                        <div className="row align-items-center">
                            <div className="col-lg-7">
                              <div className="d-flex align-items-center">
                                  <h2 className="text-left comon-head cmg-heading m-0"> Trending Icon packs </h2> 
                                  <span className="ms-2 style-list01">43 styles </span>
                              </div>
                            </div>
                            
                        </div>
                             
                        <div className="row row-cols-1 row-cols-lg-3 gy-4 g-lg-4 mt-4">
      
                            {icontypes.map((type) => (
                                    <div className="col" key={type.id}>
                                      <article className="d-inline-block w-100 comon-types01 position-relative">
                                      <span className="tagsd">{type.tag}</span>
                                        <figure className="text-center mx-auto d-block mb-1">
                                          <Link href={type.link}> <Image loading="lazy" src={type.img}
                                                alt="user"
                                                width={260}
                                                height={178} /> </Link>
                                        </figure>
                                        <span className="d-flex icon-list-name col-lg-10 mx-auto align-items-center justify-content-between">
                                            <h5 className="mb-0"> 
                                              <Link href={type.link}> 
                                              {type.icon_category.trim()}
                                              </Link>
                                            </h5>
                                            <Link className="coun-text" href={type.link}> 
                                                
                                              <strong> {type.count}</strong> icons
                                            </Link>
                                            
                                        </span>
                                      </article>
                                    </div>
                                ))}
                            
                        </div>
                     </div>

                     <div className="comon-cate-list lis-icou-page05 d-inline-block w-100">
                        <div className="row align-items-center">
                            <div className="col-lg-7">
                              <div className="d-flex align-items-center">
                                  <h2 className="text-left comon-head cmg-heading m-0"> Trending Icon packs </h2> 
                                  <span className="ms-2 style-list01">43 styles </span>
                              </div>
                            </div>
                            
                        </div>
      
                        <div className="row row-cols-1 row-cols-lg-3 gy-4 g-lg-4 mt-4">
      
                            {icontypes.map((type) => (
                                    <div className="col" key={type.id}>
                                      <article className="d-inline-block w-100 comon-types01 position-relative">
                                      <span className="tagsd">{type.tag}</span>
                                        <figure className="text-center mx-auto d-block mb-1">
                                          <Link href={type.link}> <Image loading="lazy" src={type.img}
                                                alt="user"
                                                width={260}
                                                height={178} /> </Link>
                                        </figure>
                                        <span className="d-flex icon-list-name col-lg-10 mx-auto align-items-center justify-content-between">
                                            <h5 className="mb-0"> 
                                              <Link href={type.link}> 
                                                {type.title}
                                              </Link>
                                            </h5>
                                            <Link className="coun-text" href={type.link}> 
                                                
                                              <strong> {type.counting}</strong> icons
                                            </Link>
                                            
                                        </span>
                                      </article>
                                    </div>
                                ))}
                            
                        </div>
                     </div>
      
                  </div>
             </section>
       </main>

      <Footer/>
    </>
  );
}
